webpackJsonp([28],{1476:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t={children:h.default.node,delay:h.default.number,wrapperClassName:h.default.string,targetWrapperClassName:h.default.string,mode:h.default.oneOf(["mount","visibility"]),onExit:h.default.func},o={mode:"mount"},n=function(o){function n(e){r(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleMouseMove=t.handleMouseMove.bind(t),t.handleMouseLeave=t.handleMouseLeave.bind(t),t.state={isHovering:!1},t}return l(n,o),u(n,[{key:"shouldComponentUpdate",value:function(e,t){var o=!(0,c.default)(this.props,e),n=this.state.isHovering!==t.isHovering;return o||n}},{key:"handleMouseMove",value:function(){var e=this;this.state.isHovering||this.hoverTimerId||(this.hoverTimerId=window.setTimeout(function(){e.hoverTimerId=null,e.setState({isHovering:!0})},this.props.delay))}},{key:"handleMouseLeave",value:function(){this.hoverTimerId&&(window.clearTimeout(this.hoverTimerId),this.hoverTimerId=null),this.setState({isHovering:!1},this.props.onExit)}},{key:"renderHoverContents",value:function(){var o=this.state.isHovering,n=this.props,r=n.mode,a=n.targetWrapperClassName,l=(0,f.default)(this.props,Object.keys(t));return"visibility"===r?v.default.createElement("span",{className:a,style:{visibility:o?"visible":"hidden"}},v.default.createElement(e,Object.assign({},l))):o?v.default.createElement(e,Object.assign({},l)):null}},{key:"render",value:function(){var e=this.props,t=e.children,o=e.wrapperClassName;return v.default.createElement("span",{className:o,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave},this.renderHoverContents(),t)}}]),n}(m.Component);return n.displayName="WrappedHoverComponent",n.propTypes=t,n.defaultProps=o,n}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();t.default=i;var s=o(521),c=n(s),d=o(148),f=n(d),p=o(2),h=n(p),m=o(1),v=n(m)},1477:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1499);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1478:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1479);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1479:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(10),s=n(u),c=o(2),d=n(c),f=o(1),p=n(f),h=o(12),m=o(31),v=o(28),b=o(516),_=o(22),y=o(57),w=o(34),g=n(w),k=o(1480),P=o(1481),O=n(P),E={isLoggedIn:d.default.bool.isRequired},T=t.Footer=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"renderFooterMain",value:function(){var e=this.props.isLoggedIn;return p.default.createElement("div",{className:O.default.footerMain},p.default.createElement("div",{className:O.default.linkContainer},p.default.createElement("div",{className:O.default.col4},p.default.createElement("span",{className:O.default.footerMainHeader},"Unsplash"),p.default.createElement("p",{className:O.default.footerMainParagraph},"Beautiful,"," ",p.default.createElement(m.Link,{to:"/license",rel:"nofollow"},"free images")," ","gifted by the world’s most generous community of photographers.")),p.default.createElement("div",{className:O.default.offset1}),e?this.renderInfoLinks():this.renderInfoLinksLoggedOut(),e?this.renderConnectLinks():this.renderTrendingPhotosLoggedOut(),e?this.renderWhatsNewLinks():this.renderWallpapersLoggedOut()))}},{key:"renderInfoLinks",value:function(){var e=this;return p.default.createElement("div",{className:O.default.col2},p.default.createElement("span",{className:O.default.footerMainHeader},"Info"),p.default.createElement("ul",{className:(0,s.default)(O.default.footerMainNav,"list-unstyled")},k.LOGGED_IN_INFO_LINKS.map(function(t){return p.default.createElement("li",{className:O.default.footerMainNavItem,key:t.title},e.renderLink(t))})))}},{key:"renderInfoLinksLoggedOut",value:function(){var e=this;return p.default.createElement("div",{className:O.default.col2},p.default.createElement("span",{className:O.default.footerMainHeader},"Info"),p.default.createElement("ul",{className:(0,s.default)(O.default.footerMainNav,"list-unstyled")},k.LOGGED_OUT_INFO_LINKS.map(function(t){return p.default.createElement("li",{className:O.default.footerMainNavItem,key:t.title},e.renderLink(t))})))}},{key:"renderConnectLinks",value:function(){var e=this;return p.default.createElement("div",{className:O.default.col2},p.default.createElement("span",{className:O.default.footerMainHeader},"Connect"),p.default.createElement("ul",{className:(0,s.default)(O.default.footerMainNav,"list-unstyled")},k.CONNECT_LINKS.map(function(t){return p.default.createElement("li",{className:O.default.footerMainNavItem,key:t.title},e.renderLink(t))})))}},{key:"renderTrendingPhotosLoggedOut",value:function(){var e=this;return p.default.createElement("div",{className:O.default.col3},p.default.createElement("span",{className:O.default.footerMainHeader},"Trending Searches"),p.default.createElement("ul",{className:(0,s.default)(O.default.footerMainNav,"list-unstyled")},k.TRENDING_LINKS.map(function(t){return p.default.createElement("li",{className:O.default.footerMainNavItem,key:t.title},e.renderLink(t))})))}},{key:"renderWhatsNewLinks",value:function(){var e=this;return p.default.createElement("div",{className:O.default.col3},p.default.createElement("span",{className:O.default.footerMainHeader},"What’s New"),p.default.createElement("ul",{className:(0,s.default)(O.default.footerMainNav,"list-unstyled")},k.WHATS_NEW_LINKS.map(function(t){return p.default.createElement("li",{className:O.default.footerMainNavItem,key:t.title},e.renderLink(t))})))}},{key:"renderWallpapersLoggedOut",value:function(){var e=this;return p.default.createElement("div",{className:O.default.col2},p.default.createElement("span",{className:O.default.footerMainHeader},"Wallpapers"),p.default.createElement("ul",{className:(0,s.default)(O.default.footerMainNav,"list-unstyled")},k.WALLPAPER_LINKS.map(function(t){return p.default.createElement("li",{className:O.default.footerMainNavItem,key:t.title},e.renderRouterLink(t))})))}},{key:"renderRouterLink",value:function(e){var t=e.title,o=e.url,n=e.noFollow,r=void 0!==n&&n;return p.default.createElement(m.Link,{to:o,rel:r?"nofollow":void 0},t)}},{key:"renderLink",value:function(e){var t=e.title,o=e.url,n=e.noFollow,r=void 0!==n&&n,a=e.externalLink,l=void 0!==a&&a,i=l?(0,_.trackUrl)(o):o;return p.default.createElement("a",{href:i,rel:r?"nofollow":void 0},t)}},{key:"renderFooterSub",value:function(){var e=this.props.isLoggedIn;return p.default.createElement("div",{className:O.default.footerSub},p.default.createElement("div",{className:O.default.col6},p.default.createElement(m.Link,{to:"/",title:"Home — Unsplash",className:O.default.footerSubLogoLink},p.default.createElement(g.default,{type:v.SvgType.logo,className:O.default.footerSubLogo})),p.default.createElement("span",{className:O.default.footerSlogan},"Make something awesome.")),p.default.createElement("div",{className:O.default.footerRightSide},e?null:this.renderSocialIcons()))}},{key:"renderSocialLink",value:function(e){var t=(0,b.getSocialData)(e),o=(0,_.trackUrl)(t.url);return p.default.createElement("li",{className:O.default.socialLink},p.default.createElement("a",{title:"Follow Unsplash on "+t.label,target:"_blank",rel:"noopener noreferrer",href:o},p.default.createElement(g.default,{className:O.default.socialIcon,type:t.icon,width:24,height:24}),p.default.createElement("span",{className:O.default.socialText},"Unsplash ",t.label)))}},{key:"renderSocialIcons",value:function(){return p.default.createElement("div",null,p.default.createElement("ul",{className:O.default.socialLinksContainer},this.renderSocialLink("twitter"),this.renderSocialLink("facebook"),this.renderSocialLink("medium"),this.renderSocialLink("instagram")))}},{key:"render",value:function(){return p.default.createElement("footer",{className:O.default.footerGlobal},this.renderFooterMain(),this.renderFooterSub())}}]),t}(f.Component),C=function(e){return{isLoggedIn:(0,y.getIsLoggedIn)(e)}};t.default=(0,h.connect)(C)(T),T.propTypes=E},1480:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.SUPPORT_EMAIL="mailto:support@unsplash.com?subject=Where%20have%20you%20been%20all%20my%20life%3F";t.LOGGED_IN_INFO_LINKS=[{title:"Contact Us",url:n,nofollow:!0},{title:"HD Wallpapers",url:"/wallpaper"},{title:"Explore",url:"/explore"},{title:"Privacy Policy",url:"/privacy"},{title:"Terms",url:"/terms",nofollow:!0},{title:"Security",url:"/security",nofollow:!0},{title:"Developers/API",url:"/developers"},{title:"Help",url:"https://community.unsplash.com/help",nofollow:!0}],t.LOGGED_OUT_INFO_LINKS=[{title:"Explore",url:"/explore"},{title:"Popular Collections",url:"/explore/collections"},{title:"Wallpaper",url:"/wallpaper"},{title:"Unsplash for Chrome",url:"https://instant.unsplash.com/",nofollow:!0,externalLink:!0},{title:"Privacy Policy",url:"/privacy",nofollow:!0},{title:"Terms",url:"/terms",nofollow:!0},{title:"Security",url:"/security",nofollow:!0},{title:"Developers/API",url:"/developers"},{title:"Contact Us",url:n},{title:"Help",url:"https://community.unsplash.com/help",nofollow:!0,externalLink:!0}],t.CONNECT_LINKS=[{title:"Twitter",url:"https://twitter.com/unsplash",externalLink:!0},{title:"Facebook",url:"https://facebook.com/unsplash",externalLink:!0},{title:"Medium",url:"https://medium.com/unsplash",externalLink:!0},{title:"Instagram",url:"https://instagram.com/unsplash",externalLink:!0}],t.TRENDING_LINKS=[{title:"Love pictures",url:"/search/photos/love"},{title:"Dog pictures",url:"/search/photos/dog"},{title:"Cat pictures",url:"/search/photos/cat"},{title:"Beach pictures",url:"/search/photos/beach"},{title:"White backgrounds",url:"/collections/1127156/white-background"},{title:"Happy Thanksgiving images",url:"/search/photos/happy-thanksgiving"},{title:"Happy Mother's Day images",url:"/search/photos/happy-mothers-day"},{title:"Happy New Year images",url:"/search/photos/happy-new-year"},{title:"Happy birthday images",url:"/search/photos/happy-birthday"}],t.WHATS_NEW_LINKS=[{title:"Hello, Unsplash, Inc.",url:"https://medium.com/unsplash/hello-unsplash-inc-ce02b1c79d23",noFollow:!0,externalLink:!0},{title:"Unsplash turns 3",url:"https://1095.unsplash.com/",noFollow:!0,externalLink:!0},{title:"Buy the Unsplash Book",url:"https://book.unsplash.com/",noFollow:!0,externalLink:!0},{title:"Unsplash Filters for Polarr",url:"https://unsplash.polarr.co/",noFollow:!0,externalLink:!0},{title:"Unsplash 4.0 Release",url:"https://medium.com/swlh/announcing-unsplash-4-0-3421b47d8f88",noFollow:!0,externalLink:!0},{title:"Unsplash Instant for Chrome",url:"https://instant.unsplash.com/",noFollow:!0,externalLink:!0},{title:"Unsplash Book Kickstarter",url:"https://www.kickstarter.com/projects/mikaelcho/the-unsplash-book",noFollow:!0,externalLink:!0},{title:"Unsplash Source",url:"https://source.unsplash.com/",noFollow:!0,externalLink:!0}],t.WALLPAPER_LINKS=[{title:"Cool Wallpapers",url:"/wallpaper/1111678/cool-wallpapers"},{title:"Cute Wallpapers",url:"/wallpaper/1111680/cute-wallpapers"},{title:"iPhone Wallpaper",url:"/wallpaper/1065412/iphone-wallpapers"},{title:"HD Wallpapers",url:"/wallpaper/1065976/hd-wallpapers"},{title:"Christmas Wallpaper",url:"/wallpaper/1066273/christmas-wallpapers"},{title:"Tumblr Wallpaper",url:"/wallpaper/1111644/tumblr-wallpapers"},{title:"Black Wallpapers",url:"/wallpaper/1101680/black-wallpapers"},{title:"Galaxy Wallpapers",url:"/wallpaper/1065374/galaxy-wallpapers"}]},1481:function(e,t){e.exports={container:"_2sCnE PrOBO _1CR66","sm-col":"_6_Gu-","sm-col-2":"_1F-RO","sm-col-4":"q9lsa","sm-col-6":"_2cVF0","md-col-1":"_1yU51","md-col-3":"_2-VcX",clearfix:"_2KLco","--sm-min":"(--sm-min)",colorLightGrey:"#ddd",colorGrey:"#999",colorLightBlack:"#111",lineHeightCopy:"_13hUA",fontWeightBold:"_2svCU",visuallyHidden:"_2iX7Z",footerGlobal:"_1f2gP _2sCnE PrOBO _1CR66",footerMainHeader:"_1vshC _2svCU _13hUA",footerSharedStyles:"_1SR6k",footerMainParagraph:"lTb2N _1SR6k",footerMainNav:"nl-Wg _1SR6k",footerMainNavItem:"_2p2mU",footerSub:"h2R3j _1SR6k",footerSubLogoLink:"_1A2Ps",footerSubLogo:"QFeEP",linkContainer:"_2AHtx _2KLco",offset1:"_2gSuc _6_Gu- _1yU51",col2:"PF9-h _6_Gu- _1F-RO",col3:"epbR2 _6_Gu- q9lsa _2-VcX",col4:"zlQ8t _6_Gu- q9lsa",col6:"_1ueWY _6_Gu- _2cVF0",footerRightSide:"_15aci _6_Gu- _2cVF0",socialLinksContainer:"hz0ls",socialLink:"_1btLB",socialIcon:"_9BPpr",socialText:"_2L0Iv _2iX7Z"}},1482:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1507);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1483:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1510);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1484:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1512);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1487:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1491);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1489:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1490);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1490:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserResultCard=void 0;var r=o(10),a=n(r),l=o(51),i=n(l),u=o(2),s=n(u),c=o(1),d=n(c),f=o(12),p=o(31),h=o(58),m=o(14),v=o(57),b=o(75),_=o(205),y=n(_),w=o(1487),g=n(w),k=o(1493),P=n(k),O=o(1496),E=n(O),T={children:s.default.element,user:s.default.object.isRequired,photos:s.default.array,authUser:s.default.object,withinContainer:s.default.bool,withFollowButton:s.default.bool},C=t.UserResultCard=function(e){var t=e.user,o=e.photos,n=e.authUser,r=e.withinContainer,l=e.withFollowButton,u=e.children,s=!!t.total_photos,c=s&&(0,b.range)(3).map(function(e){return d.default.createElement(P.default,{key:e,photo:(0,i.default)(o,e)})}),f=l&&n&&n.id!==t.id;return d.default.createElement("div",{className:(0,a.default)(E.default.cardLink,r&&E.default.withinContainer)},d.default.createElement(p.Link,{className:E.default.container,to:{pathname:(0,h.buildUserUrl)(t)},onClick:function(){return window.scrollTo(0,0)}},d.default.createElement("div",{className:E.default.topContainer},d.default.createElement("div",{className:E.default.userAvatarContainer},d.default.createElement(y.default,{className:E.default.avatar,user:t,avatarSize:_.AvatarSize.medium,disableLink:!0})),d.default.createElement("div",{className:E.default.userInfoContainer},d.default.createElement("h1",{className:E.default.userName},t.name),d.default.createElement("p",{className:E.default.userHandle},"@"+t.username))),s&&d.default.createElement("div",{className:E.default.bottomContainer},c)),f&&d.default.createElement("div",{className:E.default.followButtonContainer},d.default.createElement(g.default,{selectedUser:t,className:E.default.followButton})),u)};C.displayName="UserResultCard",C.propTypes=T;var N=function(e,t){return{authUser:(0,v.getAuthUser)(e),photos:(0,b.pickValues)((0,m.getPhotosById)(e),t.user.photoIds)||t.user.photos}};t.default=(0,f.connect)(N)(C)},1491:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FollowButton=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();o(506);var u=o(10),s=n(u),c=o(51),d=n(c),f=o(2),p=n(f),h=o(1),m=n(h),v=o(12),b=o(31),_=o(17),y=o(507),w=o(510),g=o(21),k=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(g),P=o(35),O=o(28),E=o(22),T=o(57),C=o(67),N=n(C),S=o(59),j=n(S),L=o(34),M=n(L),B=o(1492),I=n(B),R={selectedUser:p.default.object.isRequired,authUser:p.default.object,location:p.default.object,className:p.default.string,redirectAfterFollow:p.default.bool,trackFollowButtonClick:p.default.func.isRequired,trackUnfollowButtonClick:p.default.func.isRequired,followUser:p.default.func.isRequired,unfollowUser:p.default.func.isRequired,labelText:p.default.shape({isFollowing:p.default.string.isRequired,isNotFollowing:p.default.string.isRequired}),buttonType:p.default.string},U={labelText:{isFollowing:"Following",isNotFollowing:"Follow"}},A=t.FollowButton=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"componentWillUnmount",value:function(){this.followSubscription&&this.followSubscription.unsubscribe()}},{key:"getLabelText",value:function(){var e=this.props.labelText;return this.props.selectedUser.followed_by_user?e.isFollowing:e.isNotFollowing}},{key:"buildToLink",value:function(){var e=this.props,t=e.authUser,o=e.location,n=(0,P.getLocationQuery)(o),r=t?n:Object.assign({},n,{login_view:"is_visible",login_action:"follow"});return{pathname:o.pathname,search:(0,E.buildSearchFromQuery)(r),state:o.state}}},{key:"buildClickHandler",value:function(){var e=this,t=this.props,o=t.authUser,n=t.selectedUser,r=t.followUser,a=t.unfollowUser,l=t.trackFollowButtonClick,i=t.trackUnfollowButtonClick,u=t.buttonType;if(!o)return function(){return l(n.id,u)};var s=n.username,c=n.followed_by_user,d=c?N.default.custom.unfollowUser:N.default.custom.followUser,f=_.Observable.defer(function(){return d(s)}).pipe((0,y.retry)(3),(0,w.take)(1));return function(t){t.stopPropagation(),c?(a(n.id),i(n.id,u)):(r(n.id),l(n.id,u)),e.followSubscription=f.subscribe()}}},{key:"renderContainer",value:function(e){var t=this.props,o=t.selectedUser,n=t.className,r=t.redirectAfterFollow,a=t.authUser,l=this.buildClickHandler(),i=o.followed_by_user,u=!a,c=r||u,d={className:(0,s.default)(I.default.followButton,i&&I.default.isFollowing,n),buttonSize:"small"};return c?m.default.createElement(j.default,Object.assign({tag:"link",to:this.buildToLink(),onMouseUp:l},d),e):m.default.createElement(j.default,Object.assign({tag:"button",onMouseUp:l},d),e)}},{key:"render",value:function(){var e=this.props,t=e.selectedUser,o=e.authUser;return(0,d.default)(o,"username")===t.username?m.default.createElement("div",null):this.renderContainer(m.default.createElement("span",null,m.default.createElement(M.default,{type:O.SvgType.follow,className:I.default.followIcon}),this.getLabelText()))}}]),t}(h.Component);A.displayName="FollowButton",A.propTypes=R,A.defaultProps=U;var F=function(e){return{authUser:(0,T.getAuthUser)(e)}},D={trackFollowButtonClick:k.trackFollowButtonClick,trackUnfollowButtonClick:k.trackUnfollowButtonClick,followUser:k.followUser,unfollowUser:k.unfollowUser};t.default=(0,b.withRouter)((0,v.connect)(F,D)(A))},1492:function(e,t){e.exports={colorWhite:"#fff",colorLightGrey:"#ddd",colorGrey:"#999",colorDarkGrey:"#777",colorBlue:"#007fff",colorDarkBlue:"#006aff",colorBlack:"#000",followButton:"_3nDcb",isFollowing:"_2br-F",followIcon:"_2BKrY"}},1493:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1494);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1494:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(10),a=n(r),l=o(51),i=n(l),u=o(2),s=n(u),c=o(1),d=n(c),f=o(24),p=o(1495),h=n(p),m={photo:s.default.object,darker:s.default.bool.isRequired},v={darker:!1},b=function(e){var t=e.photo,o=e.darker,n=(0,i.default)(t,"urls.thumb"),r=(0,i.default)(t,"color");return d.default.createElement("div",{className:(0,a.default)(h.default.photoThumbContainer,o?h.default.photoThumbContainerDark:h.default.photoThumbContainerLight),style:t&&{backgroundColor:r}},d.default.createElement("div",{className:h.default.photoThumb,style:t&&{backgroundImage:(0,f.urlToBackgroundImage)(n)}}))};b.propTypes=m,b.defaultProps=v,t.default=b},1495:function(e,t){e.exports={colors:'"styles/Colors.css"',colorDarkWhite:"#f5f5f5",colorLightGrey:"#ddd",photoThumbContainer:"_1BiZr",photoThumbContainerLight:"_1QflV",photoThumbContainerDark:"_3mBAu",photoThumb:"_2te-4"}},1496:function(e,t){e.exports={clearfix:"_2TNYr","sm-col":"_6_Gu-","sm-col-6":"_2cVF0","md-col-4":"_1hITE",px2:"_2DKvn",floatLeft:"_2T3hc","--sm-min":"(--sm-min)",colorLightGrey:"#ddd",colorGrey:"#999",colorLightBlack:"#111",bodyCopy:"_1iWCF",truncate:"_1ByhS",textDecorationNone:"_1CBrG",spacingBase:"16px",avatarSize:"64px",grid:"_15FGY _6_Gu- _2cVF0 _1hITE _2DKvn",cardLink:"_3x_oL",withinContainer:"_3eFB8",container:"_2Twi2 _1CBrG",topContainer:"_2Em44 _2TNYr",userAvatarContainer:"_6jh8j _2T3hc",avatar:"_2ogcu",userInfoContainer:"_3_xrB",userName:"_2_qf1 _1ByhS _1iWCF",userHandle:"_1l0oJ _1ByhS",bottomContainer:"_1dc02",followButtonContainer:"_3u1LW",followButton:"_1TZOC"}},1497:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1500);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1498:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.reportPhotoImpressions=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),s=n(u),c=o(1541),d=n(c),f=o(12),p=o(100),h=n(p),m=o(21),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(m),b=o(24),_=!0===h.default.get("ENABLE_PHOTO_IMPRESSIONS_TRACKING");t.reportPhotoImpressions=function(e){var t=function(t){function o(){return r(this,o),a(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return l(o,t),i(o,[{key:"reportImpression",value:function(e){if(e){var t=this.props,o=t.photo,n=t.position;(0,t.reportPhotoImpression)({photo:{id:o.id,position:n}})}}},{key:"render",value:function(){var t=s.default.createElement(e,Object.assign({},this.props));return _&&b.isBrowser&&(0,b.checkSupportsIntersectionObservers)()?s.default.createElement(d.default,{onChange:this.reportImpression.bind(this),threshold:.5},t):t}}]),o}(u.Component);t.displayName="WrappedReportPhotoImpressionsComponent";var o={reportPhotoImpression:v.reportPhotoImpression};return(0,f.connect)(null,o)(t)}},1499:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(t,"__esModule",{value:!0});var a=o(10),l=n(a),i=o(2),u=n(i),s=o(1),c=n(s),d=o(31),f=o(145),p=o(1488),h=o(58),m=o(1476),v=n(m),b=o(205),_=n(b),y=o(1497),w=n(y),g=o(1502),k=n(g),P={user:u.default.object.isRequired,type:u.default.oneOf(["default","alt","emphasiseUsername"]),secondaryLink:u.default.shape({label:u.default.string.isRequired,href:u.default.string.isRequired}),includeAvatar:u.default.bool,inline:u.default.bool,isInFollowingFeed:u.default.bool,children:u.default.node},O={type:"default",includeAvatar:!1},E=(0,v.default)(w.default),T=function(e){var t,o=e.user,n=e.type,a=e.secondaryLink,i=e.children,u=e.includeAvatar,s=e.inline,f=e.isInFollowingFeed,m=function(){switch(n){case"default":return[];case"alt":return[k.default.alt];case"emphasiseUsername":return[k.default.mainLinkEmphasiseUsernameType,k.default.linkEmphasiseUsernameType]}}(),v=function(){switch(n){case"alt":return k.default.alt;case"emphasiseUsername":return k.default.linkEmphasiseUsernameType;default:return}}();return c.default.createElement("span",{className:k.default.container},u&&c.default.createElement(E,{user:o,delay:p.CARD_HOVER_DELAY,wrapperClassName:k.default.avatarContainer},c.default.createElement(_.default,{user:o,className:k.default.avatar})),c.default.createElement("div",{className:(0,l.default)(k.default.linkContainer,s&&k.default.inlineContainer,f&&k.default.feedContainer)},c.default.createElement(E,{user:o,delay:p.CARD_HOVER_DELAY},c.default.createElement(d.Link,{to:{pathname:(0,h.buildUserUrl)(o)},className:(0,l.default)(k.default.name,m,(t={},r(t,k.default.centerName,!a),r(t,k.default.inlineLink,s),t))},i||o.name),a?c.default.createElement("a",{href:a.href,className:(0,l.default)(k.default.name,v,r({},k.default.secondaryLink,a))},a.label):null)))};T.propTypes=P,t.default=(0,f.withDefaults)(T,O)},1500:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(2),s=n(u),c=o(1),d=n(c),f=o(12),p=o(21),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(p),m=o(24),v=o(99),b=o(57),_=o(67),y=n(_),w=o(68),g=o(511),k=n(g),P=o(1489),O=n(P),E=o(1501),T=n(E),C={user:s.default.object.isRequired,authUser:s.default.object,updateData:s.default.func.isRequired},N=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this.props,t=e.user,o=e.updateData,n=e.authUser;return(0,m.checkUserIsEnhanced)({user:t,authUser:n})?d.default.createElement(k.default,{className:T.default.cardTooltip},d.default.createElement(O.default,{withinContainer:!0,withFollowButton:!0,user:t,actions:h})):(y.default.users.profile(t.username).then(w.handleApiFetchResponse).then((0,v.normalizeResponse)("user")).then(function(e){var t=e.entities;o(t)}),null)}}]),t}(c.Component);N.displayName="UserDetailsCard",N.propTypes=C;var S=function(e){return{authUser:(0,b.getAuthUser)(e)}};t.default=(0,f.connect)(S,{updateData:h.updateData})(N)},1501:function(e,t){e.exports={cardTooltip:"wVee7"}},1502:function(e,t){e.exports={hoverTransition:"_3XJBh",colorWhite:"#fff",fontWeightMedium:"xLon9",truncate:"_1ByhS",textDecorationNone:"_1CBrG",container:"_2aPXR",avatarContainer:"JRtMq",avatar:"qNcZ0",linkContainer:"_80uCh",name:"_3XzpS _1ByhS",centerName:"_2zITg",secondaryLink:"NRFpG _1ByhS",alt:"_1_w0v _3XJBh _1CBrG",mainLinkEmphasiseUsernameType:"_1O9Y0 xLon9",linkEmphasiseUsernameType:"_3l__V _1CBrG",inlineContainer:"_3qohC",inlineLink:"_1ZT8D",feedContainer:"_3n7HL"}},1505:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1506);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1506:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SmallPhoto=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(10),s=n(u),c=o(149),d=n(c),f=o(1),p=n(f),h=o(12),m=o(31),v=o(24),b=o(204),_=o(58),y=o(145),w=o(522),g=o(122),k=o(203),P=o(1482),O=n(P),E=o(1483),T=n(E),C=o(1484),N=n(C),S=o(1477),j=n(S),L=o(1514),M=o(1515),B=n(M),I={inFollowingFeed:!1,shouldIncludeLink:!0},R=t.SmallPhoto=function(e){function t(e){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.handleMouseMove=o.handleMouseMove.bind(o),o.handleMouseLeave=o.handleMouseLeave.bind(o),o.state={isHovering:!1},o}return l(t,e),i(t,[{key:"getActionsState",value:function(){var e=this.state.isHovering,t=this.props,o=t.jsLoaded,n=t.downloadButtonXp,r=t.inFollowingFeed,a=(0,L.checkShouldShowDownloadButton)({downloadButtonXp:n,inFollowingFeed:r});return e||!o?L.ActionsStates.All:a&&!e?L.ActionsStates.DownloadButton:void 0}},{key:"handleMouseMove",value:function(){(0,L.checkHasWorkingHover)()&&!this.state.isHovering&&this.setState({isHovering:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHovering:!1})}},{key:"renderPhotoInfo",value:function(){var e=this.props,t=e.photo,o=e.linkTo,n=e.windowWidth,r=e.location,a=e.imageUrl,l=e.showPhotoInfoOnHover,i=e.shouldIncludeLink,u=!(0,b.checkIsPhone)(n);return p.default.createElement("div",{className:(0,s.default)(B.default.photoInfo,void 0!==this.getActionsState()&&B.default.photoInfoIsShown),onMouseMove:u?this.handleMouseMove:void 0,onMouseLeave:u?this.handleMouseLeave:void 0},i&&p.default.createElement(m.Link,{title:"View the photo by "+t.user.name,to:o||(0,_.buildPhotoLink)(t,r,n,{initialSrc:a}),className:B.default.photoInfoLink}),l&&this.renderActions())}},{key:"renderLikeButton",value:function(){var e=this.props,t=e.location,o=e.photo;return p.default.createElement(N.default,{type:"alt",location:t,photo:o})}},{key:"renderAddToCollectionButton",value:function(){var e=this.props,t=e.location,o=e.photo;return p.default.createElement("div",{className:B.default.addToCollectionButtonContainer},p.default.createElement(O.default,{className:B.default.collectionButton,type:"alt",photo:o,location:t}))}},{key:"renderDownloadButton",value:function(){var e=this.props,t=e.photo,o=e.downloadButtonXp,n=e.inFollowingFeed,r=(0,L.checkShouldShowTooltip)({downloadButtonXp:o,inFollowingFeed:n}),a=(0,L.checkShouldShowLabel)({downloadButtonXp:o,inFollowingFeed:n});return p.default.createElement("div",{className:B.default.buttonDownloadContainer},p.default.createElement(T.default,{type:"alt",photo:t,showLabel:a,showTooltip:r}))}},{key:"renderUserLink",value:function(){var e=this.props.photo.user;return p.default.createElement("div",{className:B.default.userContainer},p.default.createElement(j.default,{includeAvatar:!0,user:e,type:"alt"}))}},{key:"renderTopActions",value:function(){switch(this.getActionsState()){case L.ActionsStates.All:return p.default.createElement("div",{className:B.default.actionsTop},this.renderLikeButton(),this.renderAddToCollectionButton());case L.ActionsStates.DownloadButton:case void 0:return}}},{key:"renderBottomActions",value:function(){switch(this.getActionsState()){case L.ActionsStates.All:return p.default.createElement("div",{className:B.default.actionsBottom},this.renderUserLink(),this.renderDownloadButton());case L.ActionsStates.DownloadButton:return p.default.createElement("div",{className:B.default.actionsBottom},this.renderDownloadButton());case void 0:return}}},{key:"renderActions",value:function(){return void 0!==this.getActionsState()?p.default.createElement("div",null,this.renderTopActions(),this.renderBottomActions()):null}},{key:"renderImage",value:function(){var e=this,t=this.props,o=t.photo,n=t.width,r=t.height,a=t.imageUrl,l=t.fillWidth,i=t.children,u=t.followingFeedClassName,c=t.inFollowingFeed,f=t.photoRef,h={backgroundImage:(0,v.urlToBackgroundImage)(a),backgroundColor:o.color,backgroundSize:"cover",width:l?"100%":n,height:r};return p.default.createElement("div",{style:c?h:{},className:(0,s.default)(c&&(0,s.default)(B.default.photo,u))},!c&&p.default.createElement("img",{alt:o.description||void 0,src:a,ref:function(t){(0,d.default)(f)&&f(t),e.linkElem=t},className:B.default.imgPhoto,style:{width:l?"100%":n,height:r}}),i)}},{key:"render",value:function(){var e=this.props.containerClassName;return p.default.createElement("div",{className:(0,s.default)(B.default.container,e)},this.renderImage(),this.renderPhotoInfo())}}]),t}(f.PureComponent);R.displayName="SmallPhoto";var U=function(e,t){return{jsLoaded:(0,w.getJsLoaded)(e),windowWidth:(0,g.getWindowWidth)(e),downloadButtonXp:(0,k.getDownloadButtonXp)(e).orUndefined()}};t.default=(0,m.withRouter)((0,y.withDefaults)((0,h.connect)(U)(R),I))},1507:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AddToCollectionButton=void 0;var r=o(10),a=n(r),l=o(2),i=n(l),u=o(1),s=n(u),c=o(12),d=o(21),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(d),p=o(28),h=o(57),m=o(59),v=n(m),b=o(34),_=n(b),y=o(1508),w=o(1509),g=n(w),k={type:i.default.oneOf(["default","alt"]),photo:i.default.object.isRequired,setSelectedPhoto:i.default.func.isRequired,trackCollectionButtonClick:i.default.func.isRequired,location:i.default.object.isRequired,className:i.default.string,authUser:i.default.object,handleClick:i.default.func,children:i.default.node},P={type:"default"},O=t.AddToCollectionButton=function(e){var t=e.photo,o=e.setSelectedPhoto,n=e.trackCollectionButtonClick,r=e.location,l=e.type,i=e.className,u=e.authUser,c=e.handleClick,d=e.children,f="default"===l?"outline":"outline-alt";return s.default.createElement(v.default,{className:(0,a.default)(g.default.buttonCollections,i),buttonType:(0,y.inCollectionModifier)(f,t),buttonSize:"small",tag:"link",title:"Add to collection",to:(0,y.buildToLink)(u,r,t),onClick:function(){o({id:t.id}),n(t.id),c&&c()}},s.default.createElement(_.default,{type:p.SvgType.plus,className:g.default.addIcon}),s.default.createElement("span",{className:g.default.label},d,"Collect"))};O.displayName="AddToCollectionButton",O.propTypes=k,O.defaultProps=P;var E=function(e){return{authUser:(0,h.getAuthUser)(e)}},T={setSelectedPhoto:f.setSelectedPhoto,trackCollectionButtonClick:f.trackCollectionButtonClick};t.default=(0,c.connect)(E,T)(O)},1508:function(e,t,o){"use strict";function n(e,t){return t.current_user_collections&&t.current_user_collections.length>0?"green":e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildToLink=void 0,t.inCollectionModifier=n;var r=o(35),a=o(22);t.buildToLink=function(e,t,o){var n=(0,r.getLocationQuery)(t),l=e?Object.assign({},n,{add_to_collection_view:"is_visible"}):Object.assign({},n,{login_view:"is_visible",login_action:"add_to_collection",login_from_photo:o.id});return{pathname:t.pathname,search:(0,a.buildSearchFromQuery)(l),state:t.state}}},1509:function(e,t){e.exports={floatLeft:"_2T3hc","--sm-min":"(--sm-min)",addIcon:"_2rdbO _2T3hc",label:"_1eyJo"}},1510:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadButton=void 0;var a=o(10),l=n(a),i=o(2),u=n(i),s=o(1),c=n(s),d=o(12),f=o(21),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(f),h=o(508),m=o(24),v=o(28),b=o(1476),_=n(b),y=o(297),w=o(59),g=n(w),k=o(511),P=n(k),O=o(34),E=n(O),T=o(1511),C=n(T),N={photo:u.default.object.isRequired,type:u.default.oneOf(["default","alt","green"]),showLabel:u.default.bool,showTooltip:u.default.bool,className:u.default.string,trackPhotoDownloadButtonClick:u.default.func.isRequired,showFixedBottomCard:u.default.func.isRequired,hideDownloadBottomBar:u.default.func.isRequired,label:u.default.string},S={type:"default",label:"Download"},j=t.DownloadButton=function(e){var t=e.photo,o=e.trackPhotoDownloadButtonClick,n=e.type,a=e.showLabel,i=e.showTooltip,u=e.className,s=e.showFixedBottomCard,d=e.hideDownloadBottomBar,f=e.label,p=function(){o(t),d(),m.safeLocalStorage.setItem(h.HAS_DOWNLOADED_A_PHOTO,""+!0);var e=new y.SayThanksCard(t.id);s(e)},b=a&&c.default.createElement("span",{className:C.default.label},f),w=c.default.createElement(E.default,{type:v.SvgType.download,className:(0,l.default)(C.default.downloadIcon,r({},C.default.labelIcon,a))}),k=function(){return c.default.createElement(P.default,{className:C.default.tooltip,tipPositionClassName:C.default.tooltipAnchorRight},c.default.createElement("div",{className:C.default.tooltipContents},"Click the ↓ to download this photo for free."))},O=(0,_.default)(k),T=function(){switch(n){case"default":return"outline";case"alt":return"outline-alt";case"green":return"green"}}();return c.default.createElement(g.default,{className:(0,l.default)(C.default.button,u),buttonType:T,buttonSize:"small",title:"Download photo",href:t.links.download+"?force=true",rel:"nofollow",download:!0,target:"_blank",track:p},c.default.createElement("span",null,i?c.default.createElement(O,null,w):w,b))};j.propTypes=N,j.defaultProps=S,j.displayName="DownloadButton";var L={trackPhotoDownloadButtonClick:p.trackPhotoDownloadButtonClick,showFixedBottomCard:p.showFixedBottomCard,hideDownloadBottomBar:p.hideDownloadBottomBar};t.default=(0,d.connect)(null,L)(j)},1511:function(e,t){e.exports={"--sm-min":"(--sm-min)",colorWhite:"#fff",button:"_1Tfeo",icon:"_11dQc",downloadIcon:"Apljk _11dQc",labelIcon:"_1Jd5C",label:"_2Aga-",tooltip:"_2wyvF",tooltipAnchorRight:"GMco6",tooltipContents:"_31KQ1"}},1512:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LikeButton=void 0;var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();o(506);var s=o(10),c=n(s),d=o(2),f=n(d),p=o(1),h=n(p),m=o(12),v=o(17),b=o(507),_=o(21),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),w=o(35),g=o(28),k=o(22),P=o(57),O=o(67),E=n(O),T=o(59),C=n(T),N=o(34),S=n(N),j=o(1513),L=n(j),M={type:f.default.oneOf(["default","alt"]),photo:f.default.object.isRequired,location:f.default.object.isRequired,className:f.default.string,authUser:f.default.object,trackPhotoUnlike:f.default.func.isRequired,trackPhotoLike:f.default.func.isRequired,unlikePhoto:f.default.func.isRequired,likePhoto:f.default.func.isRequired,setSelectedPhoto:f.default.func.isRequired},B={type:"default"},I=t.LikeButton=function(e){function t(){return a(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"componentWillUnmount",value:function(){this.likesSubscription&&this.likesSubscription.unsubscribe()}},{key:"buildToLink",value:function(){var e=this.props,t=e.authUser,o=e.location,n=e.photo,r=(0,w.getLocationQuery)(o),a=t?r:Object.assign({},r,{login_view:"is_visible",login_action:"like",login_from_photo:n.id});return{pathname:o.pathname,search:(0,k.buildSearchFromQuery)(a),state:o.state}}},{key:"isLikedModifier",value:function(){var e=this.props,t=e.photo,o=e.type,n="default"===o?"outline":"outline-alt";return t.liked_by_user?"pink":n}},{key:"buildClickHandler",value:function(){var e=this,t=this.props,o=t.photo,n=t.trackPhotoUnlike,r=t.trackPhotoLike,a=t.unlikePhoto,l=t.likePhoto,i=o.liked_by_user,u=i?E.default.photos.unlikePhoto:E.default.photos.likePhoto,s=i?n:r,c=i?a:l,d=v.Observable.defer(function(){return u(o.id)}).pipe((0,b.retry)(3));return function(t){t.preventDefault(),c(o.id),s(o),e.likesSubscription=d.subscribe()}}},{key:"renderLikesLabel",value:function(){var e=this.props.photo;return e.likes?h.default.createElement("span",{className:L.default.labelLike},e.likes):h.default.createElement("span",null)}},{key:"render",value:function(){var e=this.props,t=e.photo,o=e.setSelectedPhoto,n=e.trackPhotoLike,a=e.className,l=e.authUser,i=l?this.buildClickHandler():function(){o({id:t.id}),n(t)};return h.default.createElement(C.default,{className:(0,c.default)(L.default.buttonLike,a),buttonType:this.isLikedModifier(),tag:"link",title:"Like photo",buttonSize:"small",to:this.buildToLink(),onClick:i},h.default.createElement("span",null,h.default.createElement(S.default,{type:g.SvgType.heart,className:(0,c.default)(L.default.likeIcon,r({},L.default.likeIconLiked,t.liked_by_user))}),this.renderLikesLabel()))}}]),t}(p.Component);I.displayName="LikeButton",I.propTypes=M,I.defaultProps=B;var R=function(e){return{authUser:(0,P.getAuthUser)(e)}},U={trackPhotoUnlike:y.trackPhotoUnlike,trackPhotoLike:y.trackPhotoLike,unlikePhoto:y.unlikePhoto,likePhoto:y.likePhoto,setSelectedPhoto:y.setSelectedPhoto};t.default=(0,m.connect)(R,U)(I)},1513:function(e,t){e.exports={floatLeft:"_2T3hc",colorPink:"#f15151",colorWhite:"#fff",likeIcon:"BWSrD _2T3hc",likeIconLiked:"_1O_YD",labelLike:"_2ER2Y _2T3hc"}},1514:function(e,t,o){"use strict";function n(e){var t=e.downloadButtonXp,o=e.inFollowingFeed;return[u.Variant.showArrow,u.Variant.showBottomBar].includes(t)&&!o}function r(e){var t=i.safeLocalStorageHelpers.hasItem(l.HAS_DOWNLOADED_A_PHOTO),o=e.downloadButtonXp===u.Variant.showArrow;return n(e)&&o&&!t}function a(e){var t=e.downloadButtonXp,o=e.inFollowingFeed;return t===u.Variant.showWord&&!o}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHasWorkingHover=t.ActionsStates=void 0,t.checkShouldShowDownloadButton=n,t.checkShouldShowTooltip=r,t.checkShouldShowLabel=a;var l=o(508),i=o(24),u=o(509),s=t.ActionsStates=void 0;!function(e){e.All="All",e.DownloadButton="DownloadButton"}(s||(t.ActionsStates=s={}));var c=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream};t.checkHasWorkingHover=function(){return!c()}},1515:function(e,t){e.exports={floatLeft:"_2T3hc",floatRight:"_3pmDG","--sm-min":"(--sm-min)",colorLightGrey:"#ddd",hoverTransition:"_3XJBh",container:"_3vgBX",photo:"_1hz5D",imgPhoto:"KW7g_ _1hz5D",photoInfo:"bQJ8Z",photoInfoIsShown:"_2j4gG",photoInfoLink:"_23lr1",actionsTop:"_2yfpM",actionsBottom:"_1a5YS",userContainer:"CpQi5 _2T3hc",buttonDownloadContainer:"_3i-Ef _3pmDG",addToCollectionButtonContainer:"_3W6mQ"}},1516:function(e,t){e.exports={floatLeft:"_2T3hc",floatRight:"_3pmDG","--sm-min":"(--sm-min)",colorLightGrey:"#ddd",container:"y5w1y",photo:"cV68d",photoInfo:"hduMF",leftActions:"_31wG7 _2T3hc",rightActions:"_287Ma _3pmDG",user:"_114MZ",collectionButtonContainer:"_1XDiz",userLink:"_3isoq",userImageContainer:"_8p1N4 _2T3hc",userAvatar:"_1fYZF",userName:"_1imKo _2T3hc",userTopLink:"_1f9xN"}},1518:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1519);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1519:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.FeedContainer=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(2),s=n(u),c=o(1),d=n(c),f=o(12),p=o(21),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(p),m=o(1520),v=n(m),b={setContentWidth:s.default.func.isRequired,children:s.default.element.isRequired},_=t.FeedContainer=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"componentDidMount",value:function(){this.setContentWidth(),window.addEventListener("resize",this.handleResize.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize.bind(this))}},{key:"setContentWidth",value:function(){var e=this.props.setContentWidth;this.elem&&e(this.elem.offsetWidth-24)}},{key:"handleResize",value:function(){this.setContentWidth()}},{key:"render",value:function(){var e=this,t=this.props.children;return d.default.createElement("div",{className:v.default.container,ref:function(t){e.elem=t}},t)}}]),t}(c.Component);_.propTypes=b;var y={setContentWidth:h.setContentWidth};t.default=(0,f.connect)(null,y)(_)},1520:function(e,t){e.exports={container:"Nqw-T _2sCnE PrOBO _1CR66"}},1537:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1538);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1538:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){return{totalHeight:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,photos:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]}}function u(e){var t=0,o=e[0];return e.forEach(function(e,n){e.totalHeight<o.totalHeight&&(t=n,o=e)}),t}function s(e){return Array.from({length:e}).map(function(){return i()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Masonry=void 0;var c=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),d=o(10),f=n(d),p=o(2),h=n(p),m=o(1),v=n(m),b=o(12),_=o(21),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),w=o(204),g=o(122),k=o(203),P=o(509),O=o(1539),E=n(O),T=o(1545),C=o(1546),N=n(C),S={photos:h.default.array.isRequired,smallPhotoProps:h.default.object,windowWidth:h.default.number,downloadButtonXp:h.default.oneOf(Object.keys(P.Variant)),showDownloadBottomBar:h.default.func.isRequired,hideDownloadBottomBar:h.default.func.isRequired,shouldUseContainerPadding:h.default.bool},j={shouldUseContainerPadding:!0},L=t.Masonry=function(e){function t(e){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={gridCount:(0,w.checkIsPhoneOrTablet)(e.windowWidth)?2:3},o.renderGrid=o.renderGrid.bind(o),o}return l(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.downloadButtonXp,o=e.showDownloadBottomBar;(0,T.checkShouldShowDownloadBottomBar)(t)&&o()}},{key:"componentWillUpdate",value:function(e){var t=this.props.windowWidth;e.windowWidth!==t&&((0,w.checkIsPhoneOrTablet)(e.windowWidth)?this.setState({gridCount:2}):this.setState({gridCount:3}))}},{key:"componentWillUnmount",value:function(){this.props.hideDownloadBottomBar()}},{key:"getGridData",value:function(e){var t=this.props.photos,o=s(e);return t.forEach(function(e){var t=o[u(o)];e.height&&e.width&&(t.totalHeight+=e.height/e.width,t.photos.push(e))}),o.map(function(e){return e.photos})}},{key:"renderGrid",value:function(e,t){var o=this.props,n=o.photos,r=o.smallPhotoProps,a=this.state.gridCount;return v.default.createElement("div",{key:t,ref:"MasonryGrid"+t,className:(0,f.default)(N.default.Grid,3===a&&N.default.GridThree,2===a&&N.default.GridTwo,1===a&&N.default.GridOne)},e.map(function(e,t){var o=n.indexOf(e);return v.default.createElement(E.default,{smallPhotoProps:r,gridCount:a,photo:e,position:o,key:t})}))}},{key:"render",value:function(){var e=this.state.gridCount,t=this.props.shouldUseContainerPadding,o=this.getGridData(e).map(this.renderGrid);return v.default.createElement("div",{id:"gridMulti",className:(0,f.default)(N.default.container,t&&N.default.containerWithPadding),"data-test":T.TEST_ATTRIBUTE},o)}}]),t}(m.Component);L.displayName="Masonry",L.propTypes=S,L.defaultProps=j;var M=function(e){return{windowWidth:(0,g.getWindowWidth)(e),downloadButtonXp:(0,k.getDownloadButtonXp)(e).orUndefined()}},B={showDownloadBottomBar:y.showDownloadBottomBar,hideDownloadBottomBar:y.hideDownloadBottomBar};t.default=(0,b.connect)(M,B)(L)},1539:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1540);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1540:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),a=n(r),l=o(1),i=n(l),u=o(12),s=o(1498),c=o(515),d=o(146),f=o(75),p=o(1505),h=n(p),m=o(1543),v=o(1544),b=n(v),_={smallPhotoProps:a.default.object,contentWidth:a.default.number,pixelRatio:a.default.number.isRequired,photo:a.default.object.isRequired,gridCount:a.default.number.isRequired},y=function(e){var t=e.smallPhotoProps,o=e.gridCount,n=e.contentWidth,r=e.pixelRatio,a=e.photo,l=Math.ceil(n/o-32),u=(0,f.getImageSizeAndImgixUrl)({photo:a,isMasonry:!0,parentWidth:l,pixelRatio:r}),s=u.imageUrl,c=u.imageWidth,d=u.imageHeight;return i.default.createElement("div",{className:b.default.photoContainer,"data-test":m.TEST_ATTRIBUTE},i.default.createElement(h.default,Object.assign({fillWidth:!0,showPhotoInfoOnHover:!0,width:c,height:d,imageUrl:s,photo:a},t)))};y.displayName="MasonryPhoto",y.propTypes=_;var w=function(e){return{contentWidth:(0,c.getContentWidth)(e),pixelRatio:(0,d.getPixelRatio)(e)}};t.default=(0,s.reportPhotoImpressions)((0,u.connect)(w)(y))},1541:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=o(1),c=(n(s),o(2)),d=n(c),f=o(1542),p=function(e){return"function"==typeof e},h=function(e){function t(){var e,o,n,r;a(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return o=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.state={inView:!1},n.node=null,n.handleNode=function(e){n.node&&(0,f.unobserve)(n.node),e&&(0,f.observe)(e,n.handleChange,n.props.threshold),n.node=e},n.handleChange=function(e){return n.setState({inView:e})},r=o,l(n,r)}return i(t,e),u(t,[{key:"componentWillUpdate",value:function(e,t){this.props.onChange&&t.inView!==this.state.inView&&(this.props.onChange(t.inView),t.inView&&e.unobserve)}},{key:"componentDidUpdate",value:function(e,t){t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,f.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,f.unobserve)(this.node),this.node=null)}},{key:"render",value:function(){var e=this.props,t=e.children,o=e.render,n=e.tag,a=(e.triggerOnce,e.threshold,r(e,["children","render","tag","triggerOnce","threshold"])),l=this.state.inView;return(0,s.createElement)(n,Object.assign({},a,{ref:this.handleNode}),l&&p(o)?o():null,p(t)?t(l):t)}}]),t}(s.Component);h.propTypes={tag:d.default.node,children:d.default.oneOfType([d.default.func,d.default.node]),triggerOnce:d.default.bool,threshold:d.default.number,onChange:d.default.func,render:d.default.func},h.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=h},1542:function(e,t,o){"use strict";function n(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e&&t){var n=i.get(o);n||(n=new IntersectionObserver(a,{threshold:o}),i.set(o,n)),l.set(e,{callback:t,visible:!1,threshold:o}),n.observe(e)}}function r(e){if(e){var t=l.get(e);if(t){l.delete(e);var o=i.get(t.threshold);o&&o.unobserve(e);var n=!1;l.forEach(function(e){e.threshold===t.threshold&&(n=!0)}),o&&!n&&(o.disconnect(),i.delete(t.threshold))}}}function a(e){e.forEach(function(e){if(l.has(e.target)){var t=e.isIntersecting,o=e.intersectionRatio,n=e.target,r=l.get(n),a=r.callback,i=r.visible,u=r.threshold,s=i?o>u:o>=u;void 0!==t&&(s=s&&t),l.set(n,{callback:a,visible:s,threshold:u}),a&&a(s)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.observe=n,t.unobserve=r;var l=new Map,i=new Map;t.default={observe:n,unobserve:r}},1543:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photo-component"},1544:function(e,t){e.exports={"--sm-min":"(--sm-min)",photoContainer:"_1pn7R"}},1545:function(e,t,o){"use strict";function n(e){var t=a.safeLocalStorageHelpers.hasItem(r.HAS_DOWNLOADED_A_PHOTO);return e===l.Variant.showBottomBar&&!t}Object.defineProperty(t,"__esModule",{value:!0}),t.TEST_ATTRIBUTE=void 0,t.checkShouldShowDownloadBottomBar=n;var r=o(508),a=o(24),l=o(509);t.TEST_ATTRIBUTE="photos-grid-view"},1546:function(e,t){e.exports={floatLeft:"_2T3hc","--sm-min":"(--sm-min)",clearfix:"_2TNYr",container:"_3_WtK _2TNYr",containerWithPadding:"_1C-lZ",Grid:"_1OvAL _2T3hc",GridThree:"_27nWV",GridTwo:"_1eGVY",GridOne:"_3nHtz"}},1551:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1552);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1552:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),a=n(r),l=o(1),i=n(l),u=o(1553),s=n(u),c=o(1558),d=o(1559),f=n(d),p={photos:a.default.array},h=function(e){var t=e.photos;return i.default.createElement("div",{id:"gridSingle",className:f.default.container,"data-test":c.TEST_ATTRIBUTE},t.map(function(e,t){return i.default.createElement(s.default,{key:e.id,photo:e,position:t})}))};h.displayName="PhotosListView",h.propTypes=p,t.default=h},1553:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1554);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1554:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Photo=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(2),s=n(u),c=o(1),d=n(c),f=o(31),p=o(1482),h=n(p),m=o(1483),v=n(m),b=o(1484),_=n(b),y=o(1477),w=n(y),g=o(1555),k=n(g),P=o(1557),O=o(1516),E=n(O),T={location:s.default.object.isRequired,photo:s.default.object.isRequired,position:s.default.number.isRequired},C=t.Photo=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"renderLikeButton",value:function(){var e=this.props,t=e.location,o=e.photo;return d.default.createElement(_.default,{photo:o,location:t})}},{key:"renderAddToCollectionButton",value:function(){var e=this.props,t=e.location,o=e.photo;return d.default.createElement("div",{className:E.default.collectionButtonContainer},d.default.createElement(h.default,{photo:o,location:t}))}},{key:"renderleftActions",value:function(){return d.default.createElement("div",{className:E.default.leftActions},this.renderLikeButton(),this.renderAddToCollectionButton())}},{key:"renderRightActions",value:function(){var e=this.props.photo;return d.default.createElement("div",{className:E.default.rightActions},d.default.createElement(v.default,{photo:e,showLabel:!0}))}},{key:"renderUser",value:function(){var e=this.props.photo.user;return d.default.createElement("div",{className:E.default.user},d.default.createElement(w.default,{includeAvatar:!0,user:e}))}},{key:"renderPhotoInfo",value:function(){return d.default.createElement("div",{className:E.default.photoInfo},this.renderleftActions(),this.renderUser(),this.renderRightActions())}},{key:"renderTopUserLink",value:function(){var e=this.props.photo.user;return d.default.createElement("div",{className:E.default.userTopLink},d.default.createElement(w.default,{includeAvatar:!0,user:e}))}},{key:"render",value:function(){var e=this.props,t=e.location,o=e.photo,n=e.position;return d.default.createElement("div",{className:E.default.container,"data-test":P.TEST_ATTRIBUTE},this.renderTopUserLink(),d.default.createElement(k.default,{location:t,position:n,photo:o}),this.renderPhotoInfo())}}]),t}(c.Component);C.displayName="Photo",C.propTypes=T,t.default=(0,f.withRouter)(C)},1555:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1556);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1556:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoImage=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(2),s=n(u),c=o(1),d=n(c),f=o(12),p=o(31),h=o(21),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(h),v=o(204),b=o(58),_=o(1498),y=o(515),w=o(146),g=o(122),k=o(75),P=o(1516),O=n(P),E={location:s.default.object.isRequired,photo:s.default.object.isRequired,windowWidth:s.default.number,contentWidth:s.default.number,pixelRatio:s.default.number.isRequired,setSelectedPhoto:s.default.func.isRequired},T=t.PhotoImage=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props,o=t.photo,n=t.photo.user,r=t.pixelRatio,a=t.location,l=t.setSelectedPhoto,i=t.windowWidth,u=t.contentWidth,s=(0,v.checkIsPhone)(i)?i:u,c=(0,k.getImageSizeAndImgixUrl)({photo:o,parentWidth:s,pixelRatio:r}),f=c.imageUrl,h=c.imageWidth,m=c.imageHeight;return d.default.createElement(p.Link,{ref:function(t){e.elem=t},to:(0,b.buildPhotoLink)(o,a,i),title:"View the photo By "+n.name,onClick:function(){return l({id:o.id,ref:e.elem})}},d.default.createElement("img",{alt:o.description||null,src:f,className:O.default.photo,style:{width:h,height:m}}))}}]),t}(c.Component);T.displayName="PhotoImage",T.propTypes=E;var C=function(e){return{pixelRatio:(0,w.getPixelRatio)(e),windowWidth:(0,g.getWindowWidth)(e),contentWidth:(0,y.getContentWidth)(e)}},N={setSelectedPhoto:m.setSelectedPhoto};t.default=(0,_.reportPhotoImpressions)((0,f.connect)(C,N)(T))},1557:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photo-component"},1558:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="photos-list-view"},1559:function(e,t){e.exports={"--xs-max":"(--xs-max)",container:"_1I8cs"}},1704:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1705);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1705:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),a=n(r),l=o(1),i=n(l),u=o(1706),s=n(u),c={type:a.default.oneOf(["photos","collections","users","photo-likes","collection-photos"]).isRequired},d=function(e){var t=e.type;return i.default.createElement("div",{className:s.default.emptyStateContainer},i.default.createElement("img",{alt:"No content available",className:s.default.emptyStateImg,src:"/a/img/empty-states/"+t+".png"}))};d.displayName="EmptyState",d.propTypes=c,t.default=d},1706:function(e,t){e.exports={emptyStateContainer:"_1SdCr",emptyStateImg:"_3AIC0"}},1978:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1979);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},1979:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchPhotos=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}();o(519);var u=o(25),s=o(2),c=n(s),d=o(1),f=n(d),p=o(12),h=o(17),m=o(517),v=o(518),b=o(206),_=o(21),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(_),w=o(150),g=o(24),k=o(99),P=o(210),O=o(122),E=o(203),T=o(67),C=n(T),N=o(68),S=o(1704),j=n(S),L=o(1518),M=n(L),B=o(1478),I=n(B),R=o(1537),U=n(R),A=o(1551),F=n(A),D=o(512),W=n(D),x=o(1980),H=o(1981),G=n(H),q=(0,k.normalizeResponse)("searchPhotos"),V={search:c.default.object.isRequired,updateData:c.default.func.isRequired,addPhotosToSearchPhotoFeed:c.default.func.isRequired,searchXps:c.default.object.isRequired,isPhone:c.default.bool},X=t.SearchPhotos=function(e){function t(e){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.fetchPhotos=o.fetchPhotos.bind(o),o}return l(t,e),i(t,[{key:"componentDidMount",value:function(){this.addScrollSubscription()}},{key:"componentWillReceiveProps",value:function(e){e.search.query!==this.props.search.query&&(this.removeScrollSubscription(),this.addScrollSubscription())}},{key:"componentWillUnmount",value:function(){this.removeScrollSubscription()}},{key:"addScrollSubscription",value:function(){var e=this,t=h.Observable.fromEvent(window,"scroll").pipe((0,v.filter)(function(){return(0,g.shouldFetchMoreContent)()}),(0,b.map)(function(){return e.props.search.photos.lastPageFetched}),(0,m.distinct)());this.scrollSubscription=t.subscribe(this.fetchPhotos)}},{key:"fetchPhotos",value:function(){var e=this.props,t=e.search,o=e.searchXps,n=e.updateData,r=e.addPhotosToSearchPhotoFeed,a=t.photos,l=a.maxPage,i=a.lastPageFetched;if(i<l){var u=i+1;C.default.custom.search.photos(t.query,u,w.SEARCH_PER_PAGE,o).then(N.handleApiFetchResponse).then(q).then(function(e){var t=e.entities,o=e.result;n(t),r({lastPageFetched:u,photoIds:o.results})})}}},{key:"removeScrollSubscription",value:function(){u.Option.of(this.scrollSubscription).get().unsubscribe(),this.fetchSubscription&&this.fetchSubscription.unsubscribe()}},{key:"render",value:function(){var e=this.props,t=e.search.photos,o=t.total,n=t.results,r=t.maxPage,a=t.lastPageFetched,l=t.isLoading,i=e.isPhone;return 0!==o||l?l?f.default.createElement("div",{"data-test":x.TEST_ATTRIBUTE},f.default.createElement(W.default,null)):f.default.createElement(M.default,null,f.default.createElement("div",{"data-test":x.TEST_ATTRIBUTE},i?f.default.createElement(F.default,{photos:n}):f.default.createElement(U.default,{photos:n}),a<r&&f.default.createElement(W.default,null),f.default.createElement("div",{className:G.default.footerContainer},f.default.createElement(I.default,null)))):f.default.createElement("div",{"data-test":x.TEST_ATTRIBUTE},f.default.createElement(j.default,{type:"photos"}))}}]),t}(d.Component);X.displayName="SearchPhotos",X.propTypes=V;var z=function(e){return{search:(0,P.getDenormalizedSearch)(e),isPhone:(0,O.getIsPhone)(e),searchXps:(0,E.getAllSearchXps)(e)}},K={updateData:y.updateData,addPhotosToSearchPhotoFeed:y.addPhotosToSearchPhotoFeed};t.default=(0,p.connect)(z,K)(X)},1980:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TEST_ATTRIBUTE="search-photos-route"},1981:function(e,t){e.exports={mxn2:"_3hepI",footerContainer:"_1wtSB _3hepI"}}});
//# sourceMappingURL=search-photos-route.main.87775.js.map